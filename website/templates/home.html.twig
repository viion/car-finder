{% extends 'base.html.twig' %}

{% block body %}
    <div class="car-list-bar">
        <span>
            <strong>Sort:</strong>
            <a href="{{ path('home', { sort: 'default' }) }}" style="{{ sort == "default" ? "color:#f5e642;" : "" }}">None</a>
            -
            <a href="{{ path('home', { sort: 'added' }) }}" style="{{ sort == "added" ? "color:#f5e642;" : "" }}">Added</a>
            -
            <a href="{{ path('home', { sort: 'price' }) }}" style="{{ sort == "price" ? "color:#f5e642;" : "" }}">Price</a>
            -
            <a href="{{ path('home', { sort: 'score' }) }}" style="{{ sort == "score" ? "color:#f5e642;" : "" }}">Score</a>
        </span>

        <span>
            <strong>Last Scanned:</strong> {{ log.last_scan }}
        </span>
    </div>

    <div class="car-list">
        {% for car in cars %}
            {% set image = car.images[0] is defined ? car.images[0] : "https://www.autotrader.co.uk/images/2/fpa_no_images.png" %}
            <a href="{{ path('car', { car: car.id }) }}">
                <span class="car-info">
                    <span class="car-title">
                        {{ car.title }} - {{ car.added|date('F j', "Europe/London")|upper }}
                    </span>
                    Â£{{ car.price|number_format }} <span style="opacity: 0.6;">- {{ car.score }}/100</span>
                </span>
                {% if not car.seen %}
                    <span class="car-new">NEW</span>
                {% endif %}
                <img src="{{ image }}">
            </a>
        {% endfor %}
    </div>

{% endblock %}
